# 定位（position）

## 1. CSS布局的三种机制

**普通流、浮动 和 定位**

1. 普通流（标准流）
2. 浮动
   - 让盒子从普通流中浮起来——让多个盒子（div）水平排列成一行。
3. **定位**
   - 将盒子**定**在某一个**位置** 自由地浮在其他盒子上面——CSS离不开定位，特别是后面的js特效。

## 2.定位详解

> 定位 = 定位模式 + 边偏移

### 2.1 边偏移

在CSS中，通过top、bottom、left、right属性定义元素的边偏移：（方位名词）

| 边偏移属性 | 示例         | 描述                                                     |
| ---------- | ------------ | -------------------------------------------------------- |
| top        | top: 80px    | **顶端**偏移量，定义元素相对于其父元素**上边线的距离。** |
| bottom     | bottom: 80px | 底部。下边线。                                           |
| left       | left: 80px   | 左侧。左边线。                                           |
| right      | right: 80px  | 右侧。右边线。                                           |

定位的盒子有了边偏移才有价值。一般情况下，凡是有定位地方必定有边偏移。

### 2.2定位模式（定位的分类）（position）

```css
选择器 { position: 属性值;}
```

| 属性值   | 语义         |
| -------- | ------------ |
| static   | **静态**定位 |
| relative | **相对**定位 |
| absolute | **绝对**定位 |
| fixed    | **固定**定位 |

#### 2.2.1 静态定位（static）了解

- 是元素的默认定位方式，无定位意思，不定位的时候用。
- 按照标准流特性摆放为位置，没有边偏移。
- 在布局时我们几乎用不到。

#### 2.2.2 相对定位（relative）重要

- 元素相对于它 原来在标准流中的位置 来说的。（自恋型）

- 原来**在标准流的区域继续占有**，后面盒子仍然以标准流的方式对待它。

#### 2.2.3 绝对定位（absolute）重要

绝对定位是元素以带有定位的父级元素来移动位置（拼爹型）

1. **完全脱标**——完全不占位置；
2. **父元素没有定位**，则以**浏览器为准**定位（Document文档）。

- **父元素要有定位**
  - 将元素依据最近的已经定位（绝对、固定或相对定位）的元素（祖先）进行定位。

**定位口诀——子绝父相**

子级是绝对定位，父级要用相对定位。

#### 2.2.4 固定定位（fixed）重要

**固定定位是绝对定位**的一种特殊形式。

1. **完全脱标**——完全不占位置。
2. 只认**浏览器的可视窗口**——浏览器可视窗口 + 边偏移属性 来设置元素的位置；
   - 跟父元素没有任何关系。
   - 不随滚动条滚动。

## 3. 定位的扩展

#### 3.1 绝对盒子的居中

> 注意：绝对定位/固定定位的盒子不能通过设置margin: auto;水平居中。

在使用绝对定位时要想实现水平居中，可以按照下图的方法：

1. left: 50%; 让盒子的左侧移到父级元素的水平中心位置；
2. margin-left: -100px; 让盒子向左移动自身宽度的一半，

### 3.2 堆叠顺序（z-index）

在使用定位布局时，可能会**出现盒子垂叠**的情况。

加了定位的盒子，默认**后来者居上**，后面的盒子会压住前面的盒子。

应用z-index层叠等级属性可以调整盒子的堆叠顺序。

z-index的特性如下：

1. 属性值：正整数、负整数或0，默认值是0，数值越大，盒子越靠上。
2. 如果属性相同，则按照书写顺序，后来居上。
3. 数字后面不能加单位。

> 注意：z-index只能用于相对定位、绝对定位和固定元素，其他标准流、浮动和静态定位无效。

### 3.3定位改变display属性

前面讲过，display是 显示模式，可以改变显示模式有以下几种方式：

- inline-block 转换为行内块
- 浮动float 默认转换为行内块（类似，并不完全一样，浮动是脱标的）
- 绝对定位和固定定位也和浮动类似，默认转换为行内块。

所以说，一个行内的盒子，如果加了浮动、固定定位和绝对定位，不用转换，就可以给这个盒子直接设置宽度和高度等。

**同时注意：**

浮动元素、绝对定位元素都不会触发外边距合并问题。（我们以前是用padding border overflow解决的）

也就是说，我们给盒子改为了浮动或者定位，就不会有垂直外边距合并的问题了。

## 4. 定位小结

| 定位模式         | 是否脱标占有位置     | 移动位置基准         | 模式转换（行内块） | 使用情况                 |
| ---------------- | -------------------- | -------------------- | ------------------ | ------------------------ |
| 静态static       | 不脱标，正常模式     | 正常模式             | 不能               | 几乎不用                 |
| 相对定位relative | 不脱标，占有位置     | 相对自身位置移动     | 不能               | 基本单独使用             |
| 绝对定位absolute | 完全脱标，不占有位置 | 相当于与定位父级移动 | 能                 | 要和定位父级元素搭配使用 |
| 固定定位fixed    | 完全脱标，不占有位置 | 相对于浏览器移动位置 | 能                 | 单独使用，不需要父级     |

**注意：**

1. 边偏移需要和定位模式联合使用，单独使用无效。
2. top和bottom不要同时使用。
3. left和right不要同时使用。